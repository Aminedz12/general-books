
%%importing packages
\usepackage[utf8]{inputenc}
\usepackage{fontspec,graphicx,array,tabularx}
\usepackage{url}
\usepackage{fancyhdr}
\usepackage{endnotes}
\usepackage{setspace}
\usepackage{imakeidx}

%%page settings for the book
\usepackage[papersize={140mm,215mm},textwidth=100mm,
textheight=170mm,headheight=6mm,headsep=4mm,topmargin=17.5mm,botmargin=1.15cm,
leftmargin=20mm,rightmargin=20mm,cropmarks,footskip=0.6cm]{zwpagelayout}

%%defining fonts
\defaultfontfeatures{Ligatures=TeX}
\setmainfont{Gentium Basic}
\newfontfamily\AAN[Script=Devanagari,Mapping=velthuis-sanskrit]{AA_NAGARI_SHREE_L3}
\newfontfamily\dev[Script=Devanagari]{Sanskrit2003}



%%fancy header settings
\fancypagestyle{plain}{%
\chead[]{}
\lhead[]{}
\rhead[]{}
\cfoot[{\thepage}]{{\thepage}}
}
\renewcommand{\headrulewidth}{0pt}
\pagestyle{fancy}


%%user defined commands
\newenvironment{myquote}[1]{\par\bgroup\eleven\leftskip=10pt\rightskip=10pt#1}{\par\egroup}
\def\Authorline#1{\hfill{\Large\sl\bfseries --\, #1}}
\def\eleven{\fontsize{9}{11}\selectfont}


%%general settings
\pretolerance=9000
\parindent=0pt
\setlength{\parskip}{5pt}


%%redefining macros
\makeatletter

\renewcommand\chaptermark[1]{\markboth{#1}{}}

\renewcommand\frontmatter{%
    \cleardoublepage
  \@mainmatterfalse
  \pagenumbering{arabic}}
\renewcommand\mainmatter{%
    \cleardoublepage
  \@mainmattertrue
}

\def\@makechapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright \normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
		\setcounter{endnote}{0}%
        \huge\bfseries \@chapapp\space \thechapter
        \par\nobreak
        \vskip 20\p@
      \fi
    \fi
    \interlinepenalty\@M
    \LARGE \bfseries #1\par\nobreak
    \vskip 20\p@
  }}

\def\@makeschapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright
    \normalfont
    \interlinepenalty\@M
    \LARGE \bfseries  #1\par\nobreak
    \vskip 40\p@
  }}

\renewcommand\part{%
  \if@openright
    \cleardoublepage
  \else
    \clearpage
  \fi
  \thispagestyle{empty}%
  \if@twocolumn
    \onecolumn
    \@tempswatrue
  \else
    \@tempswafalse
  \fi
  \null\vfil
  \secdef\@part\@spart}

\def\@part[#1]#2{%
    \ifnum \c@secnumdepth >-2\relax
      \refstepcounter{part}%
      \addcontentsline{toc}{part}{\thepart\hspace{1em}#1}%
    \else
      \addcontentsline{toc}{part}{#1}%
    \fi
    \markboth{}{}%
    {\centering
     \interlinepenalty \@M
     \normalfont
     \ifnum \c@secnumdepth >-2\relax
       \huge\bfseries \partname\nobreakspace\thepart
       \par
       \vskip 20\p@
     \fi
     \Huge \bfseries #2\par}%
    \@endpart}

 
\def\notesname{Endnotes}%  

\def\enoteformat{\rightskip\z@ \leftskip\z@ \parindent=0.3em
  \leavevmode\llap{\makeenmark}}

\def\enoteheading{\section*{\notesname}%
  \mbox{}\par\vskip-\baselineskip}

\renewenvironment{thebibliography}[1]
     {\section*{\bibname}%
      %\@mkboth{\bibname}{\bibname}%
      \list{\hangindent=30pt\hangafter=1}%
           {\settowidth\labelwidth{\@biblabel{#1}}%
            \leftmargin\labelwidth
            \advance\leftmargin10pt%
            \advance\leftmargin\labelsep%
            \setlength\itemindent{-15pt}%
            \@openbib@code
            \usecounter{enumiv}%
            \let\p@enumiv\@empty
            \renewcommand\theenumiv{\@arabic\c@enumiv}}%
      \sloppy
      \clubpenalty4000
      \@clubpenalty \clubpenalty
      \widowpenalty4000%
      \sfcode`\.\@m}
     {\def\@noitemerr
       {\@latex@warning{Empty `thebibliography' environment}}%
      \endlist}
\renewcommand\@biblabel[1]{}


\renewcommand\section{\@startsection {section}{1}{\z@}%
                                   {-2.2ex \@plus -1.3ex \@minus -.3ex}%
                                   {1ex \@plus.2ex}%
                                   {\normalfont\Large\bfseries}}

\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
                                     {-2.25ex\@plus -1ex \@minus -.2ex}%
                                     {1.5ex \@plus .2ex}%
                                     {\normalfont\large\bfseries}}

\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
                                     {3.25ex\@plus -4ex \@minus -.6ex}%
                                     {1.5ex \@plus .2ex}%
                                     {\normalfont\normalsize\bfseries}}

\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
                                    {-3.25ex \@plus -1ex \@minus -.2ex}%
                                    {1em}%
                                    {\normalfont\normalsize\bfseries}}
                                     

\renewcommand\thesection{\@arabic\c@section}

\renewcommand\theparagraph{\thesubsubsection.\@alph\c@paragraph}

\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
    \thispagestyle{empty}\hbox{}\newpage\if@twocolumn\hbox{}\newpage\fi\fi\fi}

\makeatother

\setcounter{secnumdepth}{4}
\def\Break{\break }
\def\pageff#1{#1ff}
%~ \makeindex
%~ \makeindex[title=Index,program=makeindex,options=-s mystyle.ist,columnseprule=true,columns=2]
\makeindex[title=Index,program=xindy,options=-I omega -M mystyle.xdy -L english,columnseprule=true,columns=2]
